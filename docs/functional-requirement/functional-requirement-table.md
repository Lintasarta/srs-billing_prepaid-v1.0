# Functional Requirement Table

| ID | Feature | Description | Acceptance Criteria |
|---|---|---|---|
| PRE-UA-001 | Deposit Management | Customers must make a deposit to use services. | 1. Given a new customer has signed up, they must make a minimum initial deposit of amount calculated with the formula: ((estimated full usage in 1 month) / 30) * 10, which represents 10 days of estimated usage. <br>2. For subsequent top-ups, the system must calculate the minimum required amount based on the customer's usage. <br>3. The system must provide a mechanism for customers to top-up their deposit. |
| PRE-UA-002 | Balance Validation | The system must ensure a customer has sufficient funds before creating a new service. | 1. Given a customer attempts to create a new service, the system must calculate the initial cost. <br>2. The system must check if the customer's deposit balance is greater than or equal to the initial cost. <br>3. If the balance is insufficient, the system must prevent the service creation and prompt the user to top-up. |
| PRE-UA-003 | Usage and Cost Visibility | Customers must be able to view their service usage and associated costs. | 1. The portal must display a summary of all active services across all projects. <br>2. The portal must display an "Estimated Daily Charging" summary for all projects and for each individual project. <br>3. The portal must display a history of all daily debits from the customer's deposit. |
| PRE-UA-004 | Invoice Management | Customers must be able to access and manage their invoices. | 1. Customers must be able to view a list of all their invoices. <br>2. Customers must be able to view the detailed contents of a specific invoice. <br>3. Customers must be able to download a PDF version of any invoice. |
| PRE-UA-005 | Monthly Summary | Customers must receive a summary of their usage at the end of each month. | 1. Customers must be able to view a list of all available monthly summaries. <br>2. Customers must be able to view the details of a specific monthly summary. <br>3. Customers must be able to download a PDF version of any monthly summary. |
| PRE-SYS-001 | Daily Charging | The system must automatically debit the customer's deposit for services used. | 1. A scheduled process must run daily at 08:00 GMT+7. <br>2. The process must calculate the total cost of all active services for each customer over the last 24 hours. <br>3. The calculated total must be subtracted from the customer's deposit balance. <br>4. A record of the transaction must be created in the daily debit history. |
| PRE-SYS-002 | PPU Billing Calculation | The system must accurately calculate charges for Pay Per Use (PPU) services. | 1. The smallest unit of billing for PPU services is one hour. <br>2. Any partial hour of usage must be rounded up to a full hour. |
| PRE-SYS-003 | Monthly Billing Calculation | The system must accurately calculate charges for Monthly services. | 1. The smallest unit of billing for Monthly services is one day. <br>2. The daily charge for a monthly service is calculated as the total monthly price divided by the number of days in the current calendar month. |
| PRE-SYS-004 | Invoice Generation | The system must generate an invoice after a successful deposit. | 1. An invoice must be created in the system immediately after a deposit transaction is successfully confirmed. <br>2. The invoice must be sent to the customer's registered email address. <br>3. The invoice must include PPN (Value Added Tax), with the rate being configurable by a Superadmin (current rate: 11%). <br>4. For any invoice with a total amount greater than or equal to Rp 5.000.000, a Rp 10.000 e-materai (electronic stamp duty) fee must be added. <br>5. The e-materai number and effective date must be recorded and displayed on the invoice. |
| PRE-SYS-005 | Invoice Status | The system must manage the lifecycle of an invoice. | 1. The system must support the following statuses for an invoice: Draft, Unpaid, Paid, and Void. |
| PRE-SYS-006 | Monthly Summary Generation | The system must automatically generate a monthly usage summary. | 1. On the first day of each month, a process must generate a usage summary for the preceding month for every active customer. <br>2. The summary must include details of all services used, total consumption, and a list of all daily debits. |
| PRE-SU-001 | Price Management | Superadmins must be able to manage the default pricing for services. | 1. A Superadmin must have an interface to set and update the default hourly and monthly prices for service components (e.g., vCPU, RAM, Storage per GB). |
| PRE-SYS-007 | Billing State Price | The system must lock the price of a service at the time of purchase. | 1. When a customer creates a service, the current default price for that service must be stored with the service instance. <br>2. All future billing calculations for that specific service instance must use the stored price, regardless of any subsequent changes to the default price made by a Superadmin. |
